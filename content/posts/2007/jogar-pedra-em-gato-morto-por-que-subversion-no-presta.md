---
title: "Jogar Pedra em Gato Morto: por que Subversion não presta"
date: "2007-09-22T04:03:00.000Z"
tags: ["git"]
years: "2007"
---

<p></p>
<p>Adiantando o final do artigo para os impacientes: está procurando um sistema de versionamento (<span class="caps">VCS</span>)? Tente <a href="http://git.or.cz/"><strong><span class="caps">GIT</span></strong></a>.</p>
<p>Hoje eu estava ouvindo um podcast muito interessante no <span class="caps">FLOSS</span> Weekly com <a href="http://www.twit.tv/floss19">Junio Hamano</a>, mantenedor do sistema de versionamento <a href="http://en.wikipedia.org/wiki/Git_(software)"><span class="caps">GIT</span></a>, que é um sistema <strong>DISTRIBUÍDO</strong> de controle de código fonte.</p>
<p>Nunca ouvi falar.</p>
<p style="text-align: center"><img src="http://s3.amazonaws.com/akitaonrails/assets/2007/9/22/stress_one.png" srcset="http://s3.amazonaws.com/akitaonrails/assets/2007/9/22/stress_one.png 2x" alt=""></p>
<p></p>
<p></p>
<p><a href="https://darcs.net/">Darcs</a>, <a href="https://www.selenic.com/mercurial/" title="hg">Mercurial</a>, <a href="https://bazaar-vcs.org/" title="bzr">Bazaar-NG</a>, <a href="https://www.perforce.com/">Perforce</a> por alguma razão me dão uma sensação de serem mais famosos – Google usa Perforce – ou pelo menos aparecem mais nas notícias. Não sei.</p>
<p>Uso Subversion por razões históricas. Na época que comecei a usar, as outras opções mais famosas eram <span class="caps">CVS</span> ou ClearCase – eu sei, haviam outros, mas eu era ignorante, o que posso dizer. E ser mais estável que <span class="caps">CVS</span>, parecendo <span class="caps">CVS</span> e sem ser <span class="caps">CVS</span>, para mim fechou a venda. Enfim, não gosto de nenhum dos dois. Falar que <span class="caps">CVS</span> é ruim é um eufemismo hiperbólico (isso existe?). Ele nasceu torto, vai morrer torto, daí a primeira metade do título do artigo.</p>
<p>ClearCase, é uma ferramenta comercial e não é barata (mudou?). Se fosse barata até pensaria em começar a considerar mas também não gosto da <em>pose</em> dos “especialistas da Rational”. Qual a vantagem de ser um especialista de commits? O dia que eu precisar de certificação pra fazer commits … o mundo acabou! <a href="https://www.bitkeeper.com/">BitKeeper</a> também é comercial, na época em que Linus resolveu usar BitKeeper houve muita controvérsia mas depois todo mundo esqueceu. Um fator que pode não parecer muito, é o formato do repositório, leiam este <a href="https://64.233.169.104/search?q=cache:b6n7lvK2lGEJ:keithp.com/blog/Repository_Formats_Matter.html+repository+formats+matter&amp;hl=en&amp;ct=clnk&amp;cd=1&amp;client=safari">artigo</a></p>
<p>Darcs, Bazaar e Mercurial são excelentes projetos. Não me agrada muito no Darcs o fato dele ser feito em Haskell. Nada contra Haskell, eu mesmo acho que é uma excelente linguagem, mas como meu dia-a-dia não envolve Haskell – e o de muita gente – se eu precisar de suporte, alguma coisa extra, vai ser mais difícil conseguir.</p>
<p>Mercurial e, acho, que Bazaar são feitos em Python. Mesmo assim parece que suas performances são muito boas. Bazaar parece que segue a linha do antigo Arch – acho que um dos primeiros a sair da linha centralizada do <span class="caps">CVS</span>. Por alguma razão nunca me senti muito atraído por elas. Pelo menos todos nasceram distribuídos. Conclusão: se quiser outro controlador de versão, escolha um distribuído.</p>
<p>Falar bem de <span class="caps">GIT</span> não significa falar mal desses outros. Mas podemos falar muito mal de <span class="caps">CVS</span>, então falaremos: gerenciar branches é uma piada de mal gosto. Arquivos corrompidos nem se fala. Tags? Pff. Procurem no Google “cvs sucks” e acharão uma lista de motivos de porque <span class="caps">CVS</span> é ruim.</p>
<p>Subversion? Como disse, uso por motivos históricos. O slogan é <em>“um <span class="caps">CVS</span> bem feito”</em>. De fato, ele corrompe muito menos, branches são mais fáceis. No geral ele é melhor. Toneladas de ferramentas, livros, hostings, bibliotecas, etc. Gostando ou não se tornou o “padrão”. Quando implementei a versão beta num projeto, acho que em 2003, minha equipe quase cortou minha cabeça. Mas uso desde então em todos os meus projetos, com variados níveis de satisfação. Mas não vamos cuspir no prato: Subversion serviu seu papel muito bem, apesar de não ser perfeito. Mas acho que passou da hora de mudar.</p>
<p>Interessado no <span class="caps">GIT</span>, acabei achando este vídeo com o próprio Linus Torvalds, criador do <span class="caps">GIT</span>, dando uma palestra no Google:</p>
<p><object width="425" height="350">
    <param name="movie" value="https://www.youtube.com/v/4XpnKHJAok8">
    <param name="wmode" value="transparent"><embed src="https://www.youtube.com/v/4XpnKHJAok8" type="application/x-shockwave-flash" wmode="transparent" width="425" height="350">
  </object></p>
<p>É o que eu digo: todo bom projeto, open source ou não, precisa de caras como Linus. Ele vai direto ao ponto: <em>“os criadores do Subversion são idiotas!”</em> E repete isso diversas vezes em mais de uma hora de palestra. <em>“É o projeto mais sem sentido que eu já vi”</em>. Hilário! Fugindo um pouco do ponto acho que todo bom projeto precisa de pessoas carismáticas na liderança. Não importa o que eles falam, são eles que vendem o produto. O Linus começou o <span class="caps">GIT</span>, é LÓGICO que ele acha os outros ruins – e não fará nenhuma tentativa de ser <em>policamente correto</em> ou conciliador, o que eu acho ótimo. E mudando de assunto de novo: é por isso que eu gosto tanto da série <a href="https://en.wikipedia.org/wiki/House_(TV_series)">House M.D.</a>. Recomendo.</p>
<p>Voltando ao assunto, <strong>ele tem razão</strong>! Oras, Subversion é uma versão <em>um pouco</em> melhorada do <span class="caps">CVS</span>. Ele faz branches muito mais rápido: mas quem se importa? Fazer branches só é importante se o Merge depois for excepcionalmente melhor do que no <span class="caps">CVS</span>. E convenhamos: gerenciar merges em Subversion é outra piada de mal gosto (tenho um amigo que já bateu o carro de nervoso por causa disso hehe). Mesmo assim, eis a segunda metade do título do artigo.</p>
<p>Aham. Não quer dizer que não pode ser feito: claro que pode, mas não chega nem perto de receber o título de “trivial”. Ainda não usei <span class="caps">GIT</span>, mas é o que Linus argumenta: nenhuma outra alternativa que existe supera <span class="caps">GIT</span>. Eu argumentaria que talvez Darcs e Mercurial sejam bons competidores, mas o discurso de Linus foi muito persuasivo.</p>
<p>Os problemas mais comuns? Eu gosto de fazer commits o tempo todo. Mudei uma única função em um único arquivo? Commit. Mudei uma única linha de comentário? Commit. Isso funciona bem se eu trabalho sozinho. Coloque mais um desenvolvedor no jogo e a coisa começa a ficar complicada muito fácil: eu já não posso fazer mais isso com frequência porque eu posso interromper o trabalho do outro.</p>
<p>Ok, vamos fazer branches. Criar o branch é trivial. Switch. Posso fazer commits à vontade agora. Chegou a hora do merge. Vamos ver, qual foi mesmo a revisão em que o branch foi criado? Log. Finalmente, merge e … conflicts. Vamos gastar algum tempo fazendo conflict resolutions (nem sei porque algumas coisas aparecem como conflito). Agora faça isso por dois ou três dias seguidos fazendo merges mais de uma vez por dia. A coisa fica tediosa muito rápido. Esse é o problema que sistemas distribuídos prometem eliminar. Veremos se <span class="caps">GIT</span> ajuda.</p>
<p>Então encontrei um sub-projeto chamado <a href="https://git.or.cz/course/svn.html">git-svn</a> (<a href="https://utsl.gen.nz/talks/git-svn/intro.html">estes</a> <a href="https://tsunanet.blogspot.com/2007/07/learning-git-svn-in-5min.html">outros</a> também são interessantes), cuja intenção é usar <span class="caps">GIT</span> em ambientes onde Subversion seja mandatório: seja numa empresa, seja em projetos como no Google Code ou outro hosting. Você mantém um repositório centralizado em Subversion mas faz todo seu trabalho em um repositório descentralizado do <span class="caps">GIT</span> e no final envia os changesets de volta.</p>
<p>Inicialmente (algumas horas atrás, na verdade) pensei nisso porque migrar 100% para <span class="caps">GIT</span> significaria sacrificar algumas ferramentas. Capistrano, por exemplo, depende de Subversion. Mas olhando um pouco melhor parece que <a href="https://scie.nti.st/2007/9/4/capistrano-2-0-with-git-shared-repository">suportar <span class="caps">GIT</span> no Capistrano</a> é próximo de trivial também.</p>
<p>Ao que parece temos um vencedor. Ainda é um trabalho em andamento – já que a moda hoje em dia é estar sempre em Beta :-) No Windows, esqueçam: precisa de Cygwin e mesmo assim tem alguns problemas. Ferramentas gráficas? Acho que só em Linux e mesmo assim são poucas – e meio feinhas, vamos concordar. Mas, como Windows não me interessa e o próprio Subversion eu só uso via shell, então tanto faz. Como diria <span class="caps">DHH</span>: <em>“pra quê fazer parte do mainstream?”</em></p>
<p>Estes artigos tem algumas comparações interessantes: <a href="https://bryan-murdock.blogspot.com/2007/03/cutting-edge-revision-control.html">Cutting Edge Revision Control</a>, <a href="https://jaredrobinson.com/blog/?p=62">What’s Happening with Version Control Systems</a>. Ainda preciso ler este <a href="https://git.or.cz/gitwiki/GitFaq?highlight=%28merge%29#head-f7dc61b87eab4db58fe90ce48cc1d47fd50e6bea"><span class="caps">FAQ</span></a> do <span class="caps">GIT</span>. Aliás, o <a href="https://git.or.cz/gitwiki/FrontPage">GitWiki</a> tem muitos artigos e links muito interessantes.</p>
<p>Talvez o melhor artigo para todo aspirante a deserdor de Subversion, que queira entender a arquitetura geral do <span class="caps">GIT</span> e porque ele é melhor que os outros, seja este <a href="https://utsl.gen.nz/talks/git-svn/intro.html">An introduction to git-svn for Subversion/<span class="caps">SVK</span> users and deserters</a>. Assim que tiver mais tempo vou testar <span class="caps">GIT</span> nos casos mais comuns do dia-a-dia de trabalho.</p>
<p>E assistam ao vídeo do Linus é <strong><span class="caps">MUITO</span> HILÁRIO</strong>!! Kudos a Linus pela apresentação, todo palestrante deveria ter o mesmo senso de humor. Aliás: ponto negativo a todo palestrante que lê seus próprios slides (eu incluso, porque acabo caindo nessa armadilha de vez em quanto). Não preciso do palestrante se for só pra ler os slides: eu mesmo posso baixar e ler. Abaixo os bullet points!!</p>
<p></p>